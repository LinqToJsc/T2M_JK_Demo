
@{
    ViewBag.Title = "项目达成率";
}
@section styles{
    <!-- DataTables -->
    <link rel="stylesheet" href="~/Scripts/t2m_adminlte/bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css">
    <link href="~/Scripts/t2m_adminlte/plugins/jquery-multi-select/css/multi-select.css" rel="stylesheet" />
    <link href="~/Scripts/t2m_adminlte/bower_components/select2/dist/css/select2.min.css" rel="stylesheet" />
}
<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        项目列表
        @*<small>工作台</small>*@
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-book"></i> 项目计划</a></li>
        <li class="active">index2.cshtml</li>
    </ol>
</section>
<!-- Main content -->
<section class="content">
    <div class="box box-primary">

        <div class="box-body">
         

            <div id="TestE" style="width:100%;height:500px">

            </div>
        </div>

    </div>

</section>

@section scripts{
    <script src="~/Scripts/t2m_adminlte/bower_components/select2/dist/js/select2.full.min.js"></script>
    <script src="~/Scripts/t2m_adminlte/bower_components/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="~/Scripts/t2m_adminlte/bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
    <script src="~/Scripts/t2m_adminlte/bower_components/datatables.net/buttons/dataTables.buttons.js"></script>
    <script src="~/Scripts/t2m_adminlte/plugins/jquery-multi-select/js/jquery.multi-select.js"></script>
    <script src="~/Scripts/t2m_adminlte/js/datatables/dataTablesForTDF.js"></script>
    <script src="~/Scripts/Demo/echarts.min.js"></script>
    <style>
        .progressBar {
            width: 80%;
            height: 10px;
            background-color: #ccc;
            margin: 0 auto;
            /* margin-top: 50px; */
            -webkit-border-radius: 2em;
            -moz-border-radius: 2em;
            border-radius: 2em;
            margin-top: 5px;
        }

        .progressBar_Track {
            height: 10px;
            background-color: #55a2ce;
            -webkit-border-radius: 2em;
            -moz-border-radius: 2em;
            border-radius: 2em;
        }

        .left {
            float: left;
        }
    </style>
    <script>
        //bar的宽度
        var barHeight = 60;
        var barOthHeight = 70;//一定距离的留白
        var APPID = 'TestE';  //div的ID

        // app.title = '项目达成率 - 条形图';
        var aredata = [
                     { id: 1, name: '金科.天湖小镇', data: '44', data2: '58' },
                     { id: 2, name: '金科.中央公园城', data: '96', data2: '6' },
                     { id: 3, name: '金科.中华养生城', data: '95', data2: '71' },
                     { id: 4, name: '金科.金科中心', data: '6', data2: '45' },
                     { id: 5, name: '金科.金科城', data: '92', data2: '58' },
                     { id: 6, name: ' 金科.时代中心', data: '86', data2: '58' },
                     { id: 7, name: ' 金科.阳光中心', data: '86', data2: '58' },
                     { id: 8, name: ' 金科.世纪城', data: '86', data2: '58' }
        ];
        //组合自己需要数据格式
        function pullArrayForJson(data, name) {
            var aryJson = [];
            var data = data;
            if (name == "name") {
                for (var p in data) {
                    if (data[p].name != null && data[p].name && data[p].name != "") {
                        // var obj = { value: data[p].name };
                        aryJson.push(data[p].name);
                    }
                }
            }
            if (name == "data") {
                var aryJson = [];
                for (var p in data) {
                    if (data[p].data != null && data[p].data && data[p].data != "") {

                        aryJson.push(data[p].data)
                    }
                }
            }
            // console.log(aryJson);
            return aryJson;
        }
        var data = pullArrayForJson(aredata, 'data');
        var rename = pullArrayForJson(aredata, 'name');
        var myChart = echarts.init(document.getElementById('TestE'));
        //初始定义图表高度
        $('#' + APPID).height(((aredata.length + 1) * barHeight + barOthHeight) + "px");
        //初始化图表组件
        var myChart = echarts.init(document.getElementById('TestE'));
        option = {
            title: {
                text: '项目达成率',

            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                },
                formatter: function (res) {
                    //  console.log(res);
                    return "";
                }
            },
            legend: {

            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: {
                type: 'value',
                max: 100,
                interval: 10,
                axisLabel: {   //显示名称用这个进行返回
                    show: true,
                    formatter: function (value, index) {
                        return value + '%';
                    }
                }
            },
            yAxis: {
                type: 'category',
                data: rename, //这个data没有生效不知道为什么
                axisLabel: {   //显示名称用这个进行返回
                    show: true,
                    formatter: function (value, index) {
                        return rename[index].split(" ").join("\n");
                    },
                    fontSize: '14'
                }
            },
           
            series: [
                {
                    name: '2011年',
                    type: 'bar',
                    barWidth: '30%',
                    data: data,
                    label: {  //文本显示
                        normal: {
                            show: true,
                            position: 'right',
                            formatter: '{c}%',
                        }
                    },
                    itemStyle: {  //文本显示
                        normal: {
                            color: '#61a0a8'
                        }
                    },

                }
            ]
        };
        //载入option 绘制
        myChart.setOption(option);
        //自适应改变图表的宽度
       var  flgResize = true;
        $(window).resize(function () {
            if (flgResize) {
                flgResize = false;
                window.setTimeout(function () {
                    //可以在这里设置div长度宽度
                    //$(xx).width  height
                    myChart.resize();
                    flgResize = true;
                }, 200);
            }
        });
    </script>

}
